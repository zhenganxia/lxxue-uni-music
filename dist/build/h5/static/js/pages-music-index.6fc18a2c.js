(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[801],{3222:function(t,i,e){var n=e(8157);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=e(56).Z;a("edfa0f4a",n,!0,{sourceMap:!1,shadowMode:!1})},9913:function(t,i,e){var n=e(1496);n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals);var a=e(56).Z;a("cf649368",n,!0,{sourceMap:!1,shadowMode:!1})},3599:function(t,i,e){"use strict";var n;e.r(i),e.d(i,{default:function(){return T}});var a,s,o,c=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.song[0]?e("v-uni-view",{staticClass:"music"},[e("v-uni-view",{staticClass:"music_title"},[e("v-uni-text",{staticClass:"iconfont icon-shangyige",staticStyle:{position:"absolute",left:"0"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goBack.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"music_titleSong"},[e("v-uni-view",{staticClass:"music_titleAnimate"},[e("v-uni-view",{class:t.song[0].name.length<14?"":"music_titleAnimateLoop"},[t._v(t._s(t.song[0].name))])],1),e("v-uni-view",[t._v(t._s(t.song[0].ar[0].name))])],1),e("v-uni-text",{staticClass:"iconfont icon-share",staticStyle:{position:"absolute",right:"0"}})],1),e("v-uni-view",{staticClass:"music_container"},[e("v-uni-image",{staticClass:"music_needle",class:t.isPlayNeedle,attrs:{src:"/static/images/song/needle.png"}}),e("v-uni-view",{staticClass:"music_discContainer",class:t.isPlayDisc},[e("v-uni-image",{staticClass:"music_dic",attrs:{src:"/static/images/song/disc.png"}}),e("v-uni-image",{staticClass:"music_dicImg",attrs:{src:t.song[0].al.picUrl}})],1)],1),e("v-uni-view",{staticStyle:{display:"flex","justify-content":"center"}},[e("v-uni-view",{staticClass:"control-process"},[e("v-uni-text",[t._v(t._s(t.currentTime))]),e("v-uni-slider",{staticClass:"slider",attrs:{min:"0","block-size":"16",max:"100",activeColor:"rgb(240, 19, 19)",backgroundColor:"rgba(255,255,255,.3)",value:t.sliderValue},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.sliderChange.apply(void 0,arguments)},touchstart:function(i){arguments[0]=i=t.$handleEvent(i),t.sliderMoveStart.apply(void 0,arguments)},touchend:function(i){arguments[0]=i=t.$handleEvent(i),t.sliderMoveEnd.apply(void 0,arguments)}}}),e("v-uni-text",[t._v(t._s(t.durationTime))])],1)],1),e("v-uni-view",{staticClass:"music_control"},[e("v-uni-text",{class:t.chooseMode,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleChange.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-lastSong",attrs:{id:"pre"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSwitch.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"big",class:t.isPlayMusic,on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.musicPlay.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-nextSong",attrs:{id:"next"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSwitch.apply(void 0,arguments)}}}),e("v-uni-text",{staticClass:"iconfont icon-playList",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toPlayRecently.apply(void 0,arguments)}}})],1),t.isShow?e("v-uni-view",{staticClass:"song-detail"},[e("play-recently",{attrs:{playRecentlyId:t.playRecentlyIdList},on:{stopSong:function(i){arguments[0]=i=t.$handleEvent(i),t.stopSong.apply(void 0,arguments)}}})],1):t._e()],1):t._e()},r=[],l=e(6407),u=e(4587),d=(e(4553),e(8862),function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"top"},[e("v-uni-text",{staticStyle:{"font-size":"30rpx","font-weight":"600"}},[t._v("当前播放")]),t._v("("+t._s(t.playRecentlyId.length)+")"),e("v-uni-text",{staticClass:"iconfont icon-lajixiang"})],1),e("v-uni-view",{staticClass:"bottom"},t._l(t.song,(function(i){return e("v-uni-view",{key:i.id,staticClass:"item"},[e("v-uni-view",{staticClass:"music"},[e("span",{staticStyle:{"font-weight":"700"}},[t._v(t._s(i.name)+"-")]),e("span",{staticClass:"author"},[t._v(t._s(i.ar[0].name))])]),e("v-uni-text",{staticClass:"iconfont icon-quxiao",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteSong(i)}}})],1)})),1)],1)}),m=[],f=(e(1249),e(7327),e(1539),e(6302)),h={data:function(){return{song:[]}},props:{playRecentlyId:Array},watch:{playRecentlyId:{handler:function(t){this.playRecentlyId=t,this.getMusicInfo(this.playRecentlyId)},immediate:!0,deep:!0}},methods:{getMusicInfo:function(t){var i=this;return(0,u.Z)((0,l.Z)().mark((function e(){var n,a,s,o;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=null===(n=t.map((function(t){return t.id})))||void 0===n?void 0:n.join(","),e.next=3,(0,f.KJ)({ids:s});case 3:o=e.sent,i.song=null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.songs;case 5:case"end":return e.stop()}}),e)})))()},deleteSong:function(t){var i=JSON.parse(JSON.stringify(this.song));this.$emit("stopSong",i,t.id),this.song=this.song.filter((function(i){return i.id!==t.id}))}}},v=h,p=(e(9913),e(9453)),g=(0,p.Z)(v,d,m,!1,null,"1f3753b0",null,!1,a,s),w=g.exports,y=getApp().globalData,x=uni.createInnerAudioContext(),b="",k=0,_={sequence:0,random:1,loop:2},I=!1,S=[],C={data:function(){return{lyricMove:{},currentRow:void 0,lyric:[],playRecentlyId:void 0,song:[],musicId:"",isPlay:!1,mode:0,currentTime:"00:00",durationTime:"00:00",isShow:!1,playRecentlyIdList:[],isRandom:!1,isloop:!1,sliderValue:0}},onLoad:function(){var t=this;return(0,u.Z)((0,l.Z)().mark((function i(){var e,n,a;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.musicId=uni.getStorageSync("musicId")||"",n=JSON.parse(uni.getStorageSync("musicIdList")),t.playRecentlyIdList=n,S=n,!e&&n.length>0&&(e=t.musicId=null===(a=n[0])||void 0===a?void 0:a.id),i.next=7,t.getMusicInfo(e);case 7:y.isMusicPlay&&(t.isPlay=!0,uni.setStorageSync("musicId",t.musicId)),t.mode=y.playwaynum,i.t0=t.mode,i.next=1===i.t0?12:2===i.t0?15:3===i.t0?18:21;break;case 12:return t.isRandom=!1,t.isloop=!1,i.abrupt("break",21);case 15:return t.isRandom=!0,t.isloop=!1,i.abrupt("break",21);case 18:return t.isRandom=!1,t.isloop=!0,i.abrupt("break",21);case 21:case"end":return i.stop()}}),i)})))()},methods:{getMusicInfo:function(t){var i=this;return(0,u.Z)((0,l.Z)().mark((function e(){var n,a,s,o,c,r;return(0,l.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,f.KJ)({ids:t});case 2:n=e.sent,a=n.data,s=a.code,o=a.songs,200===s&&(i.song=o,r={isPlay:y.isMusicPlay,song:o[0],musicId:t},uni.$emit("musicBottom",{msg:r}),k=o.length>0?null===(c=o[0])||void 0===c?void 0:c.dt:void 0,i.durationTime=String(i.handleTime(k)));case 5:case"end":return e.stop()}}),e)})))()},musicPlay:function(){var t=this;return(0,u.Z)((0,l.Z)().mark((function i(){var e,n,a;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.isPlay=!t.isPlay,y.isMusicPlay=t.isPlay,e=t.$data,n=e.musicId,a=e.isPlay,i.next=5,t.musicControl(n,a,b);case 5:case"end":return i.stop()}}),i)})))()},musicControl:function(t,i,e){var n=this;return(0,u.Z)((0,l.Z)().mark((function a(){var s,o,c,r;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i){a.next=13;break}if(y.isMusicPlay=!0,e&&n.musicId===t){a.next=8;break}return a.next=5,(0,f.TS)({id:t});case 5:s=a.sent,o=s.data,c=o.code,r=o.data,200===c&&(b=r[0].url===e?e:r[0].url,b||uni.showToast({title:"此曲不可播放,请点击下一曲",icon:"none"}),n.isloop&&x.onEnded((function(){x.src=b,x.play()})),x.startTime=x.currentTime);case 8:x.autoplay=!0,x.src=b,x.title=n.song[0].name,a.next=15;break;case 13:y.currentTimeNum=x.currentTime,x.pause();case 15:x.onPlay((function(){y.isMusicPlay=n.isPlay=!0,n.musicId=t,x.seek(new Date(y.currentTimeNum).getMilliseconds())})),x.onPause((function(){y.isMusicPlay=n.isPlay=!1})),x.onEnded((function(){n.next(S,!1)})),x.onTimeUpdate((function(){var t=x.currentTime;n.sliderValue=t/k*1e3*100,n.currentTime=String(n.handleTime(1e3*t))}));case 19:case"end":return a.stop()}}),a)})))()},handleSwitch:function(t){var i=t.currentTarget.id;x.stop();var e=this.isRandom;switch(i){case"pre":this.pre(S,e);break;case"next":this.next(S,e);break}},pre:function(t,i){var e=this;return(0,u.Z)((0,l.Z)().mark((function n(){var a,s,o;return(0,l.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.length<2)){n.next=4;break}uni.showToast({title:"此曲为单曲",icon:"none"}),n.next=20;break;case 4:if(!i){n.next=8;break}e.handleRandomEvent(),n.next=20;break;case 8:if(a=e.musicId,s=t.findIndex((function(t){return t.id==a})),-1===s){n.next=19;break}return o=t[s-1],e.musicId=o.id,n.next=15,e.getMusicInfo(e.musicId);case 15:return n.next=17,e.musicControl(e.musicId,!0);case 17:n.next=20;break;case 19:uni.showToast({title:"此曲为第一首",icon:"none"});case 20:e.sliderValue=0,e.currentTime="00:00";case 22:case"end":return n.stop()}}),n)})))()},next:function(t,i){var e=this;return(0,u.Z)((0,l.Z)().mark((function n(){var a,s,o;return(0,l.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.length<2)){n.next=4;break}uni.showToast({title:"此曲为单曲",icon:"none"}),n.next=20;break;case 4:if(!i){n.next=8;break}e.handleRandomEvent(),n.next=20;break;case 8:if(a=e.musicId,s=t.findIndex((function(t){return t.id==a})),t.length===s+1){n.next=19;break}return o=t[s+1],e.musicId=o.id,n.next=15,e.getMusicInfo(e.musicId);case 15:return n.next=17,e.musicControl(e.musicId,!0);case 17:n.next=20;break;case 19:uni.showToast({title:"词曲为最后一首",icon:"none"});case 20:e.sliderValue=0,e.currentTime="00:00";case 22:case"end":return n.stop()}}),n)})))()},handleChange:function(){var t=y.playwaynum=this.mode=(this.mode+1)%3;switch(t){case 1:t+=1,uni.showToast({title:"随机播放",icon:"success"}),this.isRandom=!0,this.isloop=!1;break;case 2:t+=1,wx.showToast({title:"单曲循环",icon:"success"}),this.isRandom=!1,this.isloop=!0;break;default:t=1,uni.showToast({title:"列表循环",icon:"success"}),this.isRandom=!1,this.isloop=!1;break}},handleRandomEvent:function(){var t,i=this.musicId,e=S,n=e.length;if(n<2)this.musicControl(i,!0);else{if(1===n)i=e[0];else{do{var a=n-0,s=Math.random();t=0+Math.round(s*a)}while(i===e[t]||t>=e.length);this.musicId=i=e[t]}this.getMusicInfo(i),this.musicControl(i,!0)}},handleTime:function(t){var i=Math.floor(t/1e3/60),e=Math.floor(t/1e3%60);return i=1==String(i).length?"0"+i:i,e=1==String(e).length?"0"+e:e,i+":"+e},sliderChange:function(t){if(!I){this.sliderValue=t.detail.value;var i=t.detail.value/100*k;this.currentTime=String(this.handleTime(i)),x.seek(i/1e3)}},sliderMoveStart:function(){},sliderMoveEnd:function(){},toPlayRecently:function(){this.isShow=!this.isShow},goBack:function(){return(0,u.Z)((0,l.Z)().mark((function t(){return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object.assign(y,{isMusicPlay:!1,musicId:"",musicIds:[],musicIdList:[],currentTimeNum:0,playwaynum:0,song:[]}),x.stop(),uni.setStorageSync("musicId",""),uni.setStorageSync("musicIdList",JSON.stringify([])),uni.navigateBack({delta:1});case 5:case"end":return t.stop()}}),t)})))()},stopSong:function(t,i){var e=this;return(0,u.Z)((0,l.Z)().mark((function n(){var a,s;return(0,l.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.musicId=i,!e.isPlay){n.next=5;break}e.next(t,!1),n.next=11;break;case 5:return a=t.findIndex((function(t){return t.id==i})),s=t[a+1],e.musicId=s.id,e.currentTime="00:00",n.next=11,e.getMusicInfo(e.musicId);case 11:case"end":return n.stop()}}),n)})))()},sortRule:function(t,i){return t.time-i.time}},computed:{isPlayNeedle:function(){return this.isPlay&&"music_needleRotate"},isPlayDisc:function(){return this.isPlay&&"music_discContainerAnimation"},isPlayMusic:function(){return this.isPlay?"iconfont icon-play":"iconfont icon-pause"},chooseMode:function(){return this.mode===_.sequence?"iconfont icon-sequence":this.mode===_.loop?"iconfont icon-loop":"iconfont icon-random"}},components:{playRecently:w}},M=C,P=(e(3222),(0,p.Z)(M,c,r,!1,null,"05c58326",null,!1,n,o)),T=P.exports},8157:function(t,i,e){"use strict";e.r(i);var n=e(8081),a=e.n(n),s=e(3645),o=e.n(s),c=o()(a());c.push([t.id,"uni-page-body[data-v-05c58326],\nbody[data-v-05c58326]{height:100%}.music[data-v-05c58326]{height:90%}.music_title[data-v-05c58326]{background:#000;display:flex;align-items:center;color:#fff}.music_title uni-text[data-v-05c58326]{font-size:%?50?%}.music_titleSong[data-v-05c58326]{width:100%;padding:0 %?50?% 0 %?50?%;display:flex;flex-direction:column;align-items:center}.music_titleAnimate[data-v-05c58326]{width:%?300?%;font-size:%?40?%;text-align:center;overflow:hidden;white-space:nowrap;font-weight:600}.music_titleAnimateLoop[data-v-05c58326]{width:%?300?%;font-weight:600;display:inline-block;overflow:hidden;white-space:nowrap;-webkit-animation:10s titleSongLoop-data-v-05c58326 linear infinite;animation:10s titleSongLoop-data-v-05c58326 linear infinite}@-webkit-keyframes titleSongLoop-data-v-05c58326{from{-webkit-transform:translateX(%?290?%);transform:translateX(%?290?%)}to{-webkit-transform:translateX(%?-1?%);transform:translateX(%?-1?%)}}@keyframes titleSongLoop-data-v-05c58326{from{-webkit-transform:translateX(%?290?%);transform:translateX(%?290?%)}to{-webkit-transform:translateX(%?-1?%);transform:translateX(%?-1?%)}}.music_container[data-v-05c58326]{\n  /* background-image: linear-gradient(#000000 75%,#7e3f00); */background:linear-gradient(to left top,#000 75%,#7e3f00);display:flex;flex-direction:column;align-items:center;height:100%}.music_needle[data-v-05c58326]{z-index:99;position:relative;left:%?60?%;width:%?240?%;height:180px;-webkit-transform-origin:%?40?% 0;transform-origin:%?40?% 0;-webkit-transform:rotate(-20deg);transform:rotate(-20deg);transition:-webkit-transform 1s;transition:transform 1s;transition:transform 1s,-webkit-transform 1s}.music_needleRotate[data-v-05c58326]{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.music_discContainer[data-v-05c58326]{position:relative;top:%?-140?%;width:%?598?%;height:%?598?%}\n\n/* 动画 */.music_discContainerAnimation[data-v-05c58326]{-webkit-animation:musicDisc-data-v-05c58326 10s linear infinite;animation:musicDisc-data-v-05c58326 10s linear infinite;\n  /* infinite无限循环 */-webkit-animation-delay:1s;animation-delay:1s}@-webkit-keyframes musicDisc-data-v-05c58326{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes musicDisc-data-v-05c58326{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.music_dic[data-v-05c58326]{width:%?598?%;height:%?598?%}.music_dicImg[data-v-05c58326]{position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;width:%?370?%;height:%?370?%;border-radius:50%}.control-process[data-v-05c58326]{position:absolute;bottom:%?150?%;width:%?700?%;height:%?100?%;line-height:%?100?%;display:flex;justify-content:space-between;align-items:center}.control-process .slider[data-v-05c58326]{position:relative;width:%?526?%}.control-process uni-text[data-v-05c58326]{color:#fff}.music_control[data-v-05c58326]{\n  /* background: linear-gradient(#7e3f00,#000000 80%); */background:linear-gradient(to right top,#7e3f00,#000 90%);position:absolute;height:%?120?%;left:0;bottom:0;width:100%;display:flex;color:#000}.music_control uni-text[data-v-05c58326]{width:20%;height:%?120?%;line-height:%?120?%;text-align:center;color:#fff;font-size:%?50?%}.music_control uni-text.big[data-v-05c58326]{font-size:%?90?%}.song-detail[data-v-05c58326]{display:flex;align-items:center;justify-content:center;z-index:-999}.lyric-contain[data-v-05c58326]{position:fixed;z-index:999;bottom:%?150?%;width:100%;height:30%;overflow:scroll;color:#fff}.song-lyric[data-v-05c58326]{position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);left:0;top:0}",""]),i["default"]=c},1496:function(t,i,e){"use strict";e.r(i);var n=e(8081),a=e.n(n),s=e(3645),o=e.n(s),c=o()(a());c.push([t.id,".container[data-v-1f3753b0]{position:fixed;z-index:1500;bottom:%?150?%;background:hsla(0,0%,100%,.8);width:80%;height:%?480?%;border-radius:%?30?%;overflow-x:scroll}.container .top[data-v-1f3753b0]{padding:%?10?% %?20?%;display:flex;align-items:center;height:%?80?%;font-size:%?20?%}.container .top .iconfont[data-v-1f3753b0]{font-size:%?40?%;margin-left:%?330?%}.container .bottom[data-v-1f3753b0]{width:100%}.container .bottom .item[data-v-1f3753b0]{position:relative;display:flex;align-items:center;height:%?80?%;font-size:%?30?%}.container .bottom .item .music[data-v-1f3753b0]{display:flex;margin:%?20?%}.container .bottom .item .music uni-text[data-v-1f3753b0]{height:%?50?%;line-height:%?50?%;max-width:%?500?%;white-space:normal;overflow:hidden;text-overflow:ellipsis}.container .bottom .item .music .author[data-v-1f3753b0]{font-size:%?26?%;color:#777}.container .bottom .item .iconfont[data-v-1f3753b0]{position:absolute;right:%?40?%;width:%?40?%;height:%?100?%;line-height:%?100?%;text-align:center;font-weight:600;font-size:%?40?%;color:#555}",""]),i["default"]=c}}]);